<%- include ("partials/header") -%>

    <div id="disp-content">

        <div id="content-header" style="margin-left: 70px;width:300px;">
            
            <nav class="navbar navbar-expand-lg" id="search-list"
                style="height:35px; font-size:20px;background-image:linear-gradient(90deg,#05a7e7,#2a26ff);">
                <a class="navbar-brand" href="#"
                    style="color: beige; margin-left:10%; font-size:20px; font: width 5%;">Course Information</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <i class="fa fa-angle-down"
                    style="width:50px; padding-top:15px; margin-left:20px; height:50px;color:white; float:left;"></i>
            </nav>
        </div>
        <% if(status) %>
        <div class="row-tabs">
            <div class="disptab">
                <nav class="navbar navbar-expand-lg" id="search-list"
                    style="background-image:linear-gradient(90deg,#05a7e7,#2a26ff); height:40px;">
                    <a class="navbar-brand" href="#" style="color: beige; margin-left:20px;"><strong>Course
                            Details</strong></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <i class="fa fa-download"
                        style="width:50px; padding-top:15px; margin-left:240px; height:50px;color:white; float:left;"></i>
                    <i class="fa fa-expand"
                        style="width:50px; padding-top:15px; margin-left:20px; height:50px;color:white; float:left;"></i>
                </nav>
                <button style="width: 40%; margin-top: 15%;margin-left:30%;" type="button" class="btn btn-outline-primary">
                    <a href="<%= details %>" id="coursedetlink" target="_blank">
                        View Course Details
                    </a>
                </button>
            </div>
            <div class="disptab" style="margin-left: 130px;">
                <nav class="navbar navbar-expand-lg" id="search-list"
                    style="background-image:linear-gradient(90deg,#05a7e7,#2a26ff);height:40px;">
                    <a class="navbar-brand" href="#" style="color: beige; margin-left:20px;"><strong>Course Objectives
                            and Outcomes</strong></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <i class="fa fa-download"
                        style="width:50px; padding-top:15px; margin-left:70px; height:50px;color:white; float:left;"></i>
                    <i class="fa fa-expand"
                        style="width:50px; padding-top:15px; margin-left:20px; height:50px;color:white; float:left;"></i>
                </nav>
                <button style="width: 70%; margin-top: 15%;margin-left:18%;" type="button" class="btn btn-outline-primary">
                    <a href="<%= co %>" id="courseoutcometlink" target="_blank">
                        View Course Objectives and Outcomes
                    </a>
                </button>
            </div>
        </div>
        
        <div class="row-tabs">
            <div class="disptab">
                <nav class="navbar navbar-expand-lg" id="search-list"
                    style="background-image:linear-gradient(90deg,#05a7e7,#2a26ff); height:40px;">
                    <a class="navbar-brand" href="#" style="color: beige; margin-left:20px;"><strong>Evaluation
                            Rubrics</strong></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <i class="fa fa-download"
                        style="width:50px; padding-top:15px; margin-left:200px; height:50px;color:white; float:left;"></i>
                    <i class="fa fa-expand"
                        style="width:50px; padding-top:15px; margin-left:20px; height:50px;color:white; float:left;"></i>

                </nav>
                <button style="width: 42%; margin-top: 15%;margin-left:30%;" type="button" class="btn btn-outline-primary">
                    <a href="<%= eval %>" id="courseevallink" target="_blank">
                        View Evaluation Rubrics
                    </a>
                </button>

            </div>
            <div class="disptab" style="margin-left: 130px;">
                <nav class="navbar navbar-expand-lg" id="search-list"
                    style="background-image:linear-gradient(90deg,#05a7e7,#2a26ff); height:40px;">
                    <a class="navbar-brand" href="#" style="color: beige; margin-left:20px;"><strong>Course
                            Syllabus</strong></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <i class="fa fa-download"
                        style="width:50px; padding-top:15px; margin-left:230px; height:50px;color:white; float:left;"></i>
                    <i class="fa fa-expand"
                        style="width:50px; padding-top:15px; margin-left:20px; height:50px;color:white; float:left;"></i>

                </nav>
                <button style="width: 40%; margin-top: 15%;margin-left:30%;" type="button" class="btn btn-outline-primary">
                    <a href="<%= syllabus %>" id="coursesyllink" target="_blank" style="text-decoration:none;">
                        View Course Syllabus
                    </a>
                </button>
            </div>
        </div>
        <% if(ismentor) { %>
            <form id="edit-det">
                <div class="form-group">
                    <label for="filename">Select the file you want to edit</label>
                    <select class="form-control" id="filename">
                      <option value="1">Course Details</option>
                      <option value="2">Course Objectives and Outcomes</option>
                      <option value="3">Evaluation Rubrics</option>
                      <option value="4">Course Syllabus</option>
                      
                    </select>
                </div>
                <progress value="0" id="uploader" max="100">0%</progress><br><br>
                
                <input id="filebutton" class="file" type="file" name="mainimage" 
                                   value=""><br><br>
               
                <button class="btn btn-primary" id="submit_link" type="button" name="button" onclick="getfile();">Upload</button>
            </form>
        <% } %>
        

        <script src="https://www.gstatic.com/firebasejs/5.5.3/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.5.3/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.5.3/firebase-storage.js"></script>


        <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyBAaLEREKkojzCinpiQyiiplekNbkPeRrc",
            authDomain: "faculty-dashboard-75962.firebaseapp.com",
            projectId: "faculty-dashboard-75962",
            storageBucket: "faculty-dashboard-75962.appspot.com",
            messagingSenderId: "108331010859",
            appId: "1:108331010859:web:acab56a98167d87139936e",
            measurementId: "G-HMD6735S2Z"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        //firebase.analytics();

        var selectedFile;
        var filenum;
        var filetype;
        var foldername;
        function getfile()
        {
            var f = document.getElementById("filebutton");
            selectedFile = f.files[0];
            foldername = '<%- coursecode -%>'+"/";
            filenum=document.getElementById("filename").value;

            if(filenum==1)
            {
                filetype="course_det";
            }
            else if(filenum==2){
                filetype="course_co";
            }
            else if(filenum==3){
                filetype="course_eval";
            }
            else if(filenum==2){
                filetype="course_syll";
            }
            console.log(foldername+"/"+filetype);
            uploadfile(); // call below written function
        }
        function uploadfile()
        {
            // select unique name for everytime when image uploaded
            // Date.now() is function that give current timestamp
            
    
            // make ref to your firebase storage and select images folder
            var storageRef = firebase.storage().ref(foldername+ filetype);
    
            
            // put file to firebase 
            var uploadTask = storageRef.put(selectedFile);
    
            // all working for progress bar that in html
            // to indicate image uploading... report
            uploadTask.on('state_changed', function(snapshot){
              var progress = 
               (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                var uploader = document.getElementById('uploader');
                uploader.value=progress;
                switch (snapshot.state) {
                  case firebase.storage.TaskState.PAUSED:
                    console.log('Upload is paused');
                    break;
                  case firebase.storage.TaskState.RUNNING:
                    console.log('Upload is running');
                    break;
                }
            }, function(error) {console.log(error);
            }, function() {
    
                 // get the uploaded image url back
                 uploadTask.snapshot.ref.getDownloadURL().then(
                  function(downloadURL) {
    
                 // You get your url from here
                  console.log('File available at', downloadURL);
    
                // print the image url 
                    
                 console.log(downloadURL);

                    if(filenum==1)
                    {
                        document.getElementById("coursedetlink").href=downloadURL;
                    }
                    else if(filenum==2){
                        document.getElementById("courseoutcometlink").href=downloadURL;
                    }
                    else if(filenum==3){
                        document.getElementById("courseevallink").href=downloadURL;
                    }
                    else if(filenum==2){
                        document.getElementById("coursesyllink").href=downloadURL;
                    }
                
              });
            });
        };
        </script>


    </div>


    <%- include ("partials/footer") -%>